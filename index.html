<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Bulk Trade Quiz</title>
  <style>
    :root{
      --start-bg: #e6e0ff;
      --text: #111827;
      --muted: #555;
      --accent: #0ea5a4;
      --card-bg: rgba(255,255,255,0.85);
    }

    /* Basic reset */
    *{box-sizing:border-box}
    html,body,#root{height:100%}
    body{
      margin:0;
      font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
      color:var(--text);
      background:var(--start-bg);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      transition: background 0.9s ease;
      overflow-y:auto;
    }

    /* Centering */
    .center-screen{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:28px}

    /* Container */
    .card{
      width:100%;
      max-width:980px;
      border-radius:14px;
      padding:22px;
      background:transparent;
      display:block;
    }

    /* Start screen */
    .start-wrap{ text-align:center; background:transparent; padding:28px; border-radius:12px; }
    .logo {
      width:128px;height:128px;border-radius:50%;overflow:hidden;margin:0 auto 18px;
      box-shadow:0 8px 30px rgba(2,6,23,0.18);
      background:linear-gradient(135deg,#fff, #f3f4f6);
    }
    .logo img{ width:100%; height:100%; object-fit:cover; display:block }
    h1{ font-size:28px; margin:6px 0; letter-spacing:0.4px; }
    .lead{ color:var(--muted); margin-bottom:18px }

    .btn{
      background:var(--accent);
      color:#04202b;
      border:0;
      padding:12px 22px;
      border-radius:10px;
      font-weight:700;
      cursor:pointer;
      box-shadow:0 8px 26px rgba(14,165,164,0.12);
    }
    .btn.ghost{ background:transparent; color:var(--muted); border:1px solid rgba(0,0,0,0.06) }

    /* Quiz area */
    .quiz-wrap{
      display:none;
      position:relative;
      border-radius:12px;
      padding:18px;
      color:#fff;
      overflow:hidden;
      min-height:420px;
    }

    /* glass panel */
    .panel{
      background: rgba(255,255,255,0.07);
      backdrop-filter: blur(6px);
      border-radius:12px;
      padding:18px;
      position:relative;
      z-index:2;
      box-shadow:0 10px 40px rgba(2,6,23,0.35);
    }

    .q-header{ display:flex; justify-content:space-between; align-items:center; gap:12px }
    .q-count{ color: rgba(255,255,255,0.85); font-size:14px }
    .score{ font-weight:800; color: rgba(255,255,255,0.95) }

    .question{ font-size:20px; margin-top:12px; font-weight:700; color:#fff }
    .choices{ display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-top:12px }
    .choice{
      background: rgba(255,255,255,0.9);
      color:#0b1220;
      padding:12px;
      border-radius:10px;
      cursor:pointer;
      border:1px solid rgba(0,0,0,0.06);
      transition: transform .12s, box-shadow .12s, background .2s;
      user-select:none;
    }
    .choice:hover{ transform:translateY(-4px); box-shadow:0 12px 26px rgba(2,6,23,0.18) }
    .choice.selected{ box-shadow:0 8px 30px rgba(14,165,164,0.14); background: rgba(14,165,164,0.12); color:white; border:1px solid rgba(255,255,255,0.18) }

    .controls{ display:flex; justify-content:space-between; gap:10px; margin-top:18px; align-items:center }
    .controls .left{ display:flex; gap:10px; align-items:center }
    .small{ font-size:13px; color: rgba(255,255,255,0.85) }

    .result-area{ margin-top:18px; display:none; }

    /* review list */
    .review-list{ margin-top:12px; display:grid; gap:10px }
    .review-item{ background: rgba(255,255,255,0.12); padding:10px; border-radius:10px; }

    /* Export / share */
    .muted-btn{ background:transparent; border:1px solid rgba(255,255,255,0.12); color:rgba(255,255,255,0.9); padding:8px 12px; border-radius:8px; cursor:pointer }

    /* Responsive adjustments */
    @media(max-width:820px){
      .choices{ grid-template-columns:1fr }
      .logo{ width:96px;height:96px }
      h1{ font-size:22px }
    }

    /* Animated gradient mechanics:
       - When body has class .quiz-active we set background to a gradient and animate background-position (left->right)
       - We'll change the body background-image to different gradient combinations per question via JS.
    */
    @keyframes leftToRight {
      0%{ background-position:0% 50% }
      50%{ background-position:100% 50% }
      100%{ background-position:0% 50% }
    }

    /* glow overlay (soft premium) */
    .bg-glow::after{
      content:'';
      position:fixed;
      inset:0;
      pointer-events:none;
      mix-blend-mode:screen;
      filter: blur(36px) saturate(1.05);
      opacity:0.25;
      z-index:1;
      background:
        radial-gradient(600px 400px at 10% 20%, rgba(255,255,255,0.06), transparent 10%),
        radial-gradient(500px 300px at 85% 80%, rgba(255,255,255,0.04), transparent 12%);
    }

    /* enable animation when this class present */
    .bg-animated{
      animation: leftToRight 10s linear infinite;
      background-size:200% 200%;
      transition: background-image 0.9s ease, background 0.9s ease;
    }

  </style>
</head>
<body>
  <div id="root" class="center-screen">
    <div class="card">
      <!-- START SCREEN -->
      <div id="start-screen" class="start-wrap">
        <div class="logo">
          <img src="logo.jpg" alt="Project logo (logo.jpg)">
        </div>
        <h1>BULK TRADE QUIZ</h1>
        <div class="lead">Test your bulk-trade knowledge â€” quick, modern quiz.</div>
        <div style="display:flex;gap:12px;justify-content:center">
          <button id="start-btn" class="btn">Enter Quiz</button>
          <button id="how-btn" class="btn ghost" style="border-radius:10px">How it works</button>
        </div>
      </div>

      <!-- QUIZ AREA -->
      <div id="quiz-area" class="quiz-wrap">
        <div class="panel" id="panel">
          <div class="q-header">
            <div class="q-count" id="q-count">Question 1 of 3</div>
            <div class="score" id="score">Score: 0</div>
          </div>

          <div id="question-box">
            <!-- question + choices injected here -->
          </div>

          <div class="controls">
            <div class="left">
              <button id="prev-btn" class="muted-btn">Previous</button>
              <button id="skip-btn" class="muted-btn">Skip</button>
            </div>

            <div style="display:flex; gap:8px; align-items:center">
              <div class="small" id="hint"></div>
              <button id="next-btn" class="btn">Next</button>
            </div>
          </div>

          <div class="result-area" id="result-area">
            <!-- results injected here -->
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
/* ====== Quiz data ====== */
const QUESTIONS = [
  { id:1, q: 'What does "bulk trade" typically refer to?', choices:['Single-item retail orders','Large-quantity commodity shipments','Individual customer trades','Digital-only goods'], answer:1 },
  { id:2, q: 'Which document commonly accompanies a bulk shipment?', choices:['Invoice','Packing list','Warranty card','Coupon code'], answer:1 },
  { id:3, q: 'Best metric to track for bulk shipments?', choices:['CTR','Fill rate','CAC','Open rate'], answer:1 }
];

/* 5 vibrant gradient combos (left->right) */
const GRADIENTS = [
  'linear-gradient(90deg, #06b6d4 0%, #8b5cf6 100%)', // teal -> purple
  'linear-gradient(90deg, #ec4899 0%, #3b82f6 100%)', // pink -> blue
  'linear-gradient(90deg, #fb923c 0%, #10b981 100%)', // orange -> green
  'linear-gradient(90deg, #7c3aed 0%, #06b6d4 100%)', // violet -> cyan
  'linear-gradient(90deg, #ef4444 0%, #f59e0b 100%)'  // red -> gold
];

/* State */
let idx = 0;
let selected = null;
let score = 0;
let reviewed = [];
const total = QUESTIONS.length;

/* Elements */
const startBtn = document.getElementById('start-btn');
const howBtn = document.getElementById('how-btn');
const startScreen = document.getElementById('start-screen');
const quizArea = document.getElementById('quiz-area');
const qCount = document.getElementById('q-count');
const scoreEl = document.getElementById('score');
const questionBox = document.getElementById('question-box');
const nextBtn = document.getElementById('next-btn');
const prevBtn = document.getElementById('prev-btn');
const skipBtn = document.getElementById('skip-btn');
const resultArea = document.getElementById('result-area');

/* Start quiz */
startBtn.addEventListener('click', () => {
  startScreen.style.display = 'none';
  quizArea.style.display = 'block';
  // activate animated background + glow
  document.body.classList.add('bg-animated', 'bg-glow');
  // set initial gradient
  document.body.style.background = GRADIENTS[idx % GRADIENTS.length];
  renderQuestion();
});

/* How it works (simple modal-like alert) */
howBtn.addEventListener('click', () => {
  alert('Use 1-4 keys to choose answers. Press Enter to continue. You can skip questions. Results can be exported.');
});

/* Render question */
function renderQuestion(){
  const item = QUESTIONS[idx];
  qCount.textContent = `Question ${idx+1} of ${total}`;
  scoreEl.textContent = `Score: ${score}`;

  questionBox.innerHTML = `
    <div>
      <div class="question">${escapeHtml(item.q)}</div>
      <div class="choices" id="choices-area">
        ${item.choices.map((c,i) => `<div class="choice" data-index="${i}" tabindex="0"><strong style="margin-right:8px">${i+1}.</strong>${escapeHtml(c)}</div>`).join('')}
      </div>
    </div>
  `;

  // update background to this question's gradient (with smooth transition)
  document.body.style.background = GRADIENTS[idx % GRADIENTS.length];

  // attach listeners to choices
  document.querySelectorAll('.choice').forEach(el => {
    el.addEventListener('click', () => {
      document.querySelectorAll('.choice').forEach(c=>c.classList.remove('selected'));
      el.classList.add('selected');
      selected = parseInt(el.dataset.index, 10);
    });
    el.addEventListener('keydown', (e) => {
      if(e.key === 'Enter' || e.key === ' ') { el.click(); }
    });
  });

  // keyboard shortcuts
  // ensure we capture 1-4 and Enter globally
}

/* Choice and navigation handlers */
nextBtn.addEventListener('click', onNext);
prevBtn.addEventListener('click', onPrev);
skipBtn.addEventListener('click', onSkip);

function onNext(){
  const cur = QUESTIONS[idx];
  if(selected !== null){
    const correct = selected === cur.answer;
    reviewed.push({id:cur.id, selected, correct});
    if(correct) score++;
  } else {
    reviewed.push({id:cur.id, selected:null, correct:false});
  }

  selected = null;
  idx++;
  if(idx >= total){
    showResult();
    return;
  }
  // change gradient combo automatically (already set in renderQuestion)
  renderQuestion();
}

function onPrev(){
  if(idx === 0) return;
  // revert last reviewed if exists
  if(reviewed.length) reviewed.pop();
  idx--;
  selected = null;
  renderQuestion();
}

function onSkip(){
  selected = null;
  // treat as not answered
  reviewed.push({id:QUESTIONS[idx].id, selected:null, correct:false});
  idx++;
  if(idx >= total){ showResult(); return; }
  renderQuestion();
}

/* Show final result */
function showResult(){
  // stop the bg animation? we'll keep it but set pleasant gradient
  document.body.style.background = 'linear-gradient(90deg,#10b981,#3b82f6)';
  // show result area inside panel
  const correctCount = reviewed.filter(r=>r.correct).length;
  const breakdown = `<div style="font-size:20px;font-weight:800;margin-bottom:8px">${correctCount} / ${total}</div>
    <div style="color:rgba(255,255,255,0.9);margin-bottom:10px">${correctCount === total ? 'Excellent â€” perfect!' : (correctCount >= Math.ceil(total*0.7) ? 'Nice work!' : 'Keep practicing.')}</div>`;

  const reviewHtml = QUESTIONS.map((q,i) => {
    const r = reviewed.find(x=>x.id===q.id) || {selected:null, correct:false};
    const your = r.selected === null ? '<em>Skipped</em>' : q.choices[r.selected];
    const correctTxt = q.choices[q.answer];
    return `<div class="review-item">
      <div style="display:flex;justify-content:space-between;gap:12px"><div><strong>Q${i+1}.</strong> ${escapeHtml(q.q)}</div><div style="text-align:right"><div style="font-weight:700">${your}</div></div></div>
      <div style="color:rgba(255,255,255,0.85);margin-top:6px">Correct: ${escapeHtml(correctTxt)}</div>
    </div>`;
  }).join('');

  resultArea.style.display = 'block';
  resultArea.innerHTML = `
    <div style="margin-top:14px">${breakdown}</div>
    <div style="margin-top:8px"><div style="font-weight:700">Review</div>${reviewHtml}</div>
    <div style="margin-top:12px;display:flex;gap:8px">
      <button id="retry-btn" class="btn">Retry</button>
      <button id="share-btn" class="muted-btn">Copy Share Link</button>
      <button id="export-btn" class="muted-btn">Export JSON</button>
    </div>
  `;

  // attach result actions
  document.getElementById('retry-btn').addEventListener('click', () => {
    idx = 0; selected = null; score = 0; reviewed = []; resultArea.style.display = 'none';
    document.body.style.background = GRADIENTS[idx % GRADIENTS.length];
    renderQuestion();
  });
  document.getElementById('share-btn').addEventListener('click', () => {
    navigator.clipboard.writeText(window.location.href + '?score=' + correctCount).then(()=>alert('Link copied to clipboard'));
  });
  document.getElementById('export-btn').addEventListener('click', () => {
    const blob = new Blob([JSON.stringify({score:correctCount,total,reviewed},null,2)],{type:'application/json'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url; a.download = 'bulk-quiz-result.json'; a.click(); URL.revokeObjectURL(url);
  });
}

/* Keyboard handlers: 1-4 choose, Enter -> next */
window.addEventListener('keydown', (e) => {
  // if start screen visible, Enter starts quiz
  if(startScreen.style.display !== 'none'){
    if(e.key === 'Enter'){ startBtn.click(); }
    return;
  }

  // choices 1..4
  if(e.key >= '1' && e.key <= '9'){
    const n = parseInt(e.key, 10) - 1;
    const choices = document.querySelectorAll('.choice');
    if(choices[n]){
      choices[n].click();
    }
  }
  if(e.key === 'Enter'){
    // find next button and trigger
    const next = document.getElementById('next-btn');
    if(next) next.click();
  }
});

/* Utility */
function escapeHtml(s){
  return (''+s).replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c]));
}

/* Tweak: ensure choices grid updates after DOM insertion */
document.addEventListener('click', (e) => {
  if(e.target && e.target.matches && e.target.matches('.choice')){
    // mark selection visually (already done on click handler)
    // close interactions if needed
  }
});

/* On load: ensure start-screen visible and quiz hidden */
(function init(){
  startScreen.style.display = 'block';
  quizArea.style.display = 'none';
  resultArea.style.display = 'none';
  // ensure body classes clean
  document.body.classList.remove('bg-animated','bg-glow');
})();
</script>
</body>
</html>
